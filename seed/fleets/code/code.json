{
  "id": "code",
  "description": "Minimal fleet for implementing code changes efficiently",
  "agent": "fleet-manager",
  "inputs": [
    {
      "type": "user_prompt",
      "source": "user"
    }
  ],
  "outputs": [
    {
      "path": "result.md",
      "type": "fleet_result"
    }
  ],
  "tasks": [
    {
      "id": "code-analyzer",
      "description": "Analyze codebase and plan implementation",
      "agent": "code-analyzer",
      "inputs": [
        {
          "type": "user_prompt",
          "source": "user"
        }
      ],
      "outputs": [
        {
          "path": "code-analyzer.md",
          "type": "file"
        }
      ],
      "nextTasks": [
        {
          "taskId": "code-executor",
          "condition": "success"
        }
      ],
      "approval_required": false
    },
    {
      "id": "code-executor",
      "description": "Execute code changes",
      "agent": "code-executor",
      "inputs": [
        {
          "type": "file",
          "source": "code-analyzer.md"
        },
        {
          "type": "user_prompt",
          "source": "user"
        }
      ],
      "outputs": [
        {
          "path": "code-executor.md",
          "type": "file"
        }
      ],
      "nextTasks": [
        {
          "taskId": "quality-verifier",
          "condition": "success"
        }
      ],
      "approval_required": false
    },
    {
      "id": "quality-verifier",
      "description": "Verify implementation quality",
      "agent": "code-verifier",
      "inputs": [
        {
          "type": "file",
          "source": "code-executor.md"
        },
        {
          "type": "file",
          "source": "code-analyzer.md"
        }
      ],
      "outputs": [
        {
          "path": "quality-verifier.md",
          "type": "file"
        }
      ],
      "nextTasks": [
        {
          "taskId": "complete",
          "condition": "success"
        },
        {
          "taskId": "code-executor",
          "condition": "failures",
          "context": "failed_verification"
        }
      ],
      "approval_required": false
    }
  ]
}