{
  "id": "plan",
  "description": "Plan and validate code changes before implementation",
  "agent": "fleet-manager",
  "inputs": [{"type": "user_prompt", "source": "user"}],
  "outputs": [{"type": "fleet_result", "path": "result.md"}],
  "tasks": [
    {
      "id": "plan-researcher",
      "description": "Research repository to identify critical context for planning",
      "agent": "plan-researcher",
      "inputs": [{"type": "user_prompt", "source": "request"}],
      "outputs": [{"type": "file", "path": "research.md"}],
      "approval_required": false,
      "nextTasks": [
        {
          "taskId": "plan-executor",
          "condition": "success"
        }
      ]
    },
    {
      "id": "plan-executor",
      "description": "Create comprehensive implementation plan based on research",
      "agent": "plan-executor",
      "inputs": [
        {"type": "output", "source": "plan-researcher"},
        {"type": "user_prompt", "source": "request"}
      ],
      "outputs": [{"type": "file", "path": "plan.md"}],
      "approval_required": false,
      "nextTasks": [
        {
          "taskId": "plan-validator",
          "condition": "success"
        }
      ]
    },
    {
      "id": "plan-validator",
      "description": "Validate the implementation plan for completeness and feasibility",
      "agent": "plan-validator",
      "inputs": [
        {"type": "output", "source": "plan-researcher"},
        {"type": "output", "source": "plan-executor"},
        {"type": "user_prompt", "source": "request"}
      ],
      "outputs": [{"type": "file", "path": "plan-validator.md"}],
      "approval_required": false,
      "nextTasks": [
        {
          "taskId": "complete",
          "condition": "success"
        },
        {
          "taskId": "plan-executor",
          "condition": "failed",
          "context": "validation_failed_needs_revision"
        }
      ]
    }
  ]
}